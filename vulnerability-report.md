# A1 - Injection
## How you found and exploited the vulnerability, including the code/method you used?
- Uploading an image with sql in the file name allowed us to create an image that when clicked
exposes the hashed username and password in the Django error message.  The exact sql is:
    - testPic',(select password from auth_user where username='admin'),7);--

## What you were able to do with the vulnerability (i.e. what was exposed?)
- We were able to see the hashed password and username for the user with the error message, not that much else was revealed.

## The code that fixes the vulnerability
- Creating the file with defined values and saving the file would prevent sql injection, instead of directly executing the code to the database.


# A2 - Broken Auth
## How you found and exploited the vulnerability, including the code/method you used
- On the user creation form we added checkboxes for is_admin, is_staff, is_superuser.
    <input type="checkbox" value="is_admin" id="is_admin">
    <input type="checkbox" value="is_staff" id="is_staff">
    <input type="checkbox" value="is_superuser" id="is_superuser">

## What you were able to do with the vulnerability (i.e. what was exposed?)
- We were able to log into the admin site. Which is not good.

## The code that fixes the vulnerability
- We restricted the fields of the form to only modifiable categories we would want the user to hsve access to:
    fields = ['username', 'first_name', 'last_name', 'email', 'password']


# A3 - XSS
## How you found and exploited the vulnerability, including the code/method you used
- We edited the username to have an alert popup where the username would be loaded by inserting a script as the username to run.  The code used is:
<script>alert('This worked as a hack.')</script>


## What you were able to do with the vulnerability (i.e. what was exposed?)
- We were able to run a script that would run each time a username aspect was run.   This would be more malicious with a vicous script rather then an alert saying there was a hack.


## The code that fixes the vulnerability
- We removed the '|safe' in the templates, so the tags would be removed and we do not presume that the username is safe to display.  


# A4 - Insecure DOR
## How you found and exploited the vulnerability, including the code/method you used
- We could change the url and it would open up the other user's projects from a user that should not have access.  By writing this:
    - http://127.0.0.1:8000/taskManager/7/task_edit/14  We were able to edit another user's project.  This is from user 8's account.


## What you were able to do with the vulnerability (i.e. what was exposed?)
- We were able to see the projects for any user.  We were also able to delete said projects of another user from a different account.
    - http://127.0.0.1:8000/taskManager/7/task_delete/14  This is once again from user 8's account.  

## The code that fixes the vulnerability
- If we go through the views and apply the user.is_authenticated() if statement we will be able to block editing sites where it does not belong to the user that is logged in.  Although really ths site needs a lot more help then that to lock this down.  We now use that on the majority of views and redirect them back to the login page.


# A5 - Security Misconfiguration
## How you found and exploited the vulnerability, including the code/method you used
- By plugging in a random route we were able to induce a 404 error.   That 404 error listed out ever single possible route that is in the system.  This is due tot he fact that Debug is set to True.   The url we plugged in to get this view is:
    - http://127.0.0.1:8000/taskManager/whatever


## What you were able to do with the vulnerability (i.e. what was exposed?)
- We were able to see every possible url to use and route to.  This can leave your system open and vulnerable with out having the person have to guess url routes one at a time. 


## The code that fixes the vulnerability
- Update the settings.py to:
    - DEBUG = False
    - TEMPLATE_DEBUG = False


# A6 - Sensitive Data Exposure
## How you found and exploited the vulnerability, including the code/method you used
- The hashed information was stored using the weak MD5 hasher.  This was used to be quick and thereofre it takes kacers a short amount of time to break the codes.  To fix this we used:
    - django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher for PASSWORD_HASHERS in the settings.py


## What you were able to do with the vulnerability (i.e. what was exposed?)
- We could not presonally do anything, but hackers would be able to unhash the exposed hashed passwords very quickly.  

## The code that fixes the vulnerability
- PASSWORD_HASHERS = ['django.contrib.auth.hashers.PBKDF2SHA1PasswordHasher']



# A7 - Missing Function Level Access Control
## How you found and exploited the vulnerability, including the code/method you used
- We found the manage groups view was open if you were simply authenticated.  This was seen by tring to just change things randomly when not an admin. 


## What you were able to do with the vulnerability (i.e. what was exposed?)
- We were able to change the groups without permission to do so.

## The code that fixes the vulnerability
- This was fixed by in combination of if user.is_authenticated() and:
    - user.has_perm('can_change_group')


# A8 - Cross-site Request Forgery (CSRF)
## How you found and exploited the vulnerability, including the code/method you used
- We went to the the profile form and inspected the form for the user, 
    - http://localhost:8000/taskManager/profile/
- From here we were able to copy the form into a new html file and render it with the open logged in window.  We were then able to change the values and apply them to the action of the form that connects to the user ID of the person you viewed:
    - action="http://localhost:8000/taskManager/profile/2"

    - /Users/jackbot/codefellows/401/django.nV/taskManager/edit_profile.html


## What you were able to do with the vulnerability (i.e. what was exposed?)
- We are able to hijack someone's account and change the information that they had so we can access their studd.

## The code that fixes the vulnerability
- Remove the @csrf_exempt decorators so that it requires csrf.
